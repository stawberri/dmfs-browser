(function(){var e;window.Buffer=buffer.Buffer,e=$("body"),$("#text-to-file").click(function(e){function t(e){return new Buffer(e,"base64")}function n(e){return new Uint8Array(e)}var r,c,f,o,i,a,l,u,s,d,p,v,w,B,b,y,h,k,g;for(e.preventDefault(),r=$("#compressed-text").val(),c=[],f=/!!DMFS(\{(?:(?!!!DMFS)[\s\S])*\})/g;o=f.exec(r);)c.push(o[1]);for(i={},a=0,l=c.length;l>a;++a){u=c[a];try{if(s=$.parseJSON(u),null==s.fn||null==s.ct)continue;null==s.pt&&(s.pt=0),(i[d=s.fn]||(i[d]=[]))[s.pt]=s.ct}catch(S){return void(p=S)}}e:for(v in i){for(w=i[v],s={fn:v,ct:""},a=0,l=w.length;l>a;++a){if(B=w[a],null==B)continue e;s.ct=B+s.ct}""!==s.ct&&(b=s.fn,y=s.ct,y=Base65536.decode(y),$("#use-base64").is(":checked")&&(y=y.toString(),y=t(y)),y=n(y),h=new Blob([y],{type:"application/octet-stream"}),k=URL.createObjectURL(h),console.log(k),g=$("<a>"),g.attr({href:k,download:b}),g[0].click())}}),$("#file-to-text").click(function(e){var t,n;return e.preventDefault(),t=$("#file-picker")[0].files[0],null!=t?(n=new FileReader,n.addEventListener("loadend",function(){var e,r;return e=new Buffer(new Uint8Array(n.result)),$("#use-base64").is(":checked")&&(e=e.toString("base64"),e=function(e){return new Buffer(e)}(e)),e=Base65536.encode(e),r={fn:t.name,pt:0,ct:e},r=JSON.stringify(r),$("#compressed-text").val("!!DMFS"+r)}),n.readAsArrayBuffer(t)):void 0})}).call(this);
